<div class="simpleContainer" ng-controller="RegisterController">
    <div class="centerContainer" style="display: block; transform: none; opacity: 1; transition-duration: 250ms;">
        <form role="form" name="suscribeForm" id="suscribeForm">
            <div class="paymentFormContainer">
                <div class="alert alert-warning alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <b>Parece que hay un problema en tu forma de pago</b> {{errorDesc}}
                </div>
                <div>
                    <div class="stepHeader-container">
                        <div class="stepHeader" tabindex="0" style="text-align: left"><span
                                class="stepIndicator">PASO
                                <b>3</b> DE <b>3</b></span>
                            <h1 class="stepTitle">Configura tu tarjeta de crédito o débito.
                            </h1>
                        </div>
                    </div>
                </div>
                <div class="fieldContainer"><span class="logos logos-block"
                        aria-label="Aceptamos VISA y MASTERCARD."><img alt="" class="logoIcon VISA"
                            src="https://assets.nflxext.com//ffe/siteui/acquisition/payment/svg/visa.svg"><img
                            alt="" class="logoIcon MASTERCARD"
                            src="https://assets.nflxext.com//ffe/siteui/acquisition/payment/svg/mastercard.svg">
                            <img
                            alt="" class="logoIcon MASTERCARD"
                            src="https://logodownload.org/wp-content/uploads/2014/04/amex-american-express-logo-4.png">
                    </span>
                    <div class="">
                        <ul class="simpleForm structural ui-grid">
                            <li class="nfFormSpace">
                                <div class="nfInput nfInputOversize">
                                    <div class="nfInputPlacement"><label class="input_id"
                                        placeholder="firstName"><label for="id_firstName"
                                        class="placeLabel">Nombre del titular</label><input ng-model="firstName"
                                        name="firstName" class="nfTextField form-control" id="id_firstName"
                                        type="text" tabindex="0" autocomplete="cc-name"
                                        maxlength="100" minlength="1" dir="" value="" required></label></div>
                                </div>
                                <div ng-show="suscribeForm.firstName.$invalid && suscribeForm.firstName.$touched" class="inputError">El nombre es obligatorio.</div>
                            </li>
                            <li class="nfFormSpace">
                                <div class="cardNumberContainer">
                                    <div class="nfInput nfInputOversize" style="position: relative;">
                                        <div class="nfInputPlacement"><label class="input_id"
                                                placeholder="creditCardNumber"><label for="id_creditCardNumber"
                                                    class="placeLabel">Número de tarjeta</label>
                                                <input ng-model="creditCardNumber" name="creditCardNumber"
                                                    class="nfTextField  form-control" id="id_creditCardNumber"
                                                    type="tel" tabindex="0" autocomplete="off" maxlength="19"
                                                    minlength="19" dir="" value="" cleave="options.creditCard" required></div>
                                        <div class="tooltipWrapperErr" id="card" ng-show='validCreditCard' style="top: 36px;"><span class="nf-svg-icon "><img alt="" class="VISA" style="width: 35px;" ng-src="https://assets.nflxext.com//ffe/siteui/acquisition/payment/svg/{{creditCardType}}.svg"></span></div>
                                    </div>
                                </div>
                                <div ng-show="suscribeForm.creditCardNumber.$required && suscribeForm.creditCardNumber.$touched" class="inputError">El número de tarjeta es obligatorio.</div>
                                <div ng-show="(suscribeForm.creditCardNumber.$invalid || !validCreditCard) && !suscribeForm.creditCardNumber.$pristine" class="inputError">El número de tarjeta es inválido.</div>
                            </li>
                            <li class="nfFormSpace">
                                <div class="nfInput nfInputOversize">
                                    <div class="nfInputPlacement"><label class="input_id"
                                            placeholder="creditExpirationMonth"><label
                                                for="id_creditExpirationMonth" class="placeLabel">Fecha de
                                                vencimiento (MM/AA)</label><input
                                                ng-model="creditCardExpiration" cleave="options.expDate" name="creditExpirationMonth"
                                                class="nfTextField  form-control" id="id_creditExpirationMonth"
                                                type="tel" tabindex="0" maxlength="5" minlength="5" ng-pattern='/^(0[1-9]|1[0-2])\/([0-9]{2})$/' autocomplete="off" dir="" value="" required></label>
                                    </div>
                                </div>
                                <div ng-show="suscribeForm.creditExpirationMonth.$required && suscribeForm.creditExpirationMonth.$touched" class="inputError">La fecha de expiración es obligatoria.</div>
                                <div ng-show="suscribeForm.creditExpirationMonth.$invalid && !suscribeForm.creditExpirationMonth.$pristine" class="inputError">La fecha de expiración es inválida.</div>
                            </li>
                            <li class="nfFormSpace">
                                <div class="nfInput nfInputOversize" style="position: relative;">
                                    <div class="nfInputPlacement"><label class="input_id"
                                            placeholder="creditCardSecurityCode"><label
                                                for="id_creditCardSecurityCode" class="placeLabel">Código de
                                                seguridad (CVV)</label><input
                                                ng-model="creditCardSecurityCode"
                                                name="creditCardSecurityCode" class="nfTextField form-control"
                                                id="id_creditCardSecurityCode" type="tel" tabindex="0"
                                                autocomplete="off" maxlength="4" minlength="3" dir=""
                                                value="" required></label></div>
                                    <div class="tooltipWrapperErr" ng-click='toogleInfo()'><span class="nf-svg-icon "><svg width="36"
                                                height="36" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                                                <g fill="none" fill-rule="evenodd">
                                                    <g>
                                                        <circle stroke="#A9A6A6" stroke-width="2" cx="18" cy="18"
                                                            r="17"></circle>
                                                        <path
                                                            d="M17.051 21.094v-.54c0-.648.123-1.203.369-1.665.246-.462.741-.915 1.485-1.359a7.37 7.37 0 0 0 .981-.657c.222-.186.372-.366.45-.54.078-.174.117-.369.117-.585 0-.384-.177-.714-.531-.99-.354-.276-.831-.414-1.431-.414-.624 0-1.131.135-1.521.405-.39.27-.627.627-.711 1.071h-2.304a4.053 4.053 0 0 1 .738-1.845c.396-.546.924-.981 1.584-1.305.66-.324 1.44-.486 2.34-.486.852 0 1.596.153 2.232.459.636.306 1.134.726 1.494 1.26.36.534.54 1.143.54 1.827 0 .66-.177 1.227-.531 1.701-.354.474-.891.933-1.611 1.377-.42.252-.729.48-.927.684-.198.204-.33.399-.396.585a1.79 1.79 0 0 0-.099.603v.414h-2.268zm1.26 4.158c-.408 0-.762-.15-1.062-.45-.3-.3-.45-.654-.45-1.062 0-.408.15-.762.45-1.062.3-.3.654-.45 1.062-.45.408 0 .762.15 1.062.45.3.3.45.654.45 1.062 0 .408-.15.762-.45 1.062-.3.3-.654.45-1.062.45z"
                                                            fill="#A9A6A6"></path>
                                                    </g>
                                                </g>
                                            </svg></span></div>
                                </div>
                                <div ng-show="suscribeForm.creditCardSecurityCode.$required && suscribeForm.creditCardSecurityCode.$touched" class="inputError">El CVV es obligatorio.</div>
                                <div ng-show="suscribeForm.creditCardSecurityCode.$invalid && !suscribeForm.creditCardSecurityCode.$pristine" class="inputError">El CVV es inválido.</div>
                            </li>
                        </ul>
                    </div>
                    <div class="changePlanContainer" ng-class="{ 'amount': addCoupon && !hasCoupon}">
                        <div class="planInfo"><span class="planName">Plan Premium</span><span
                                class="planDesc">
                                <span ng-show="descount">{{descountAmount}} </span>
                                    <spa>
                                        <span ng-class="{ 'priceLineThrough': descount }">{{suscriptionPrice}}</span>
                                        <!---<div ng-show="!isDoctorOnline">
                                            <span ng-class="{ 'priceLineThrough': descount }">{{suscriptionPrice}} pago anual </span>
                                            
                                        </div>
                                        <div ng-show="isDoctorOnline">
                                            <span ng-class="{ 'priceLineThrough': descount }">{{priceService}}</span>
                                            USD al mes
                                        </div>--->
                                    </span>
                                </span>
                            <div ng-show="!descount && !invalidCoupon && addCoupon">{{monthText}}</div>
                        </div>
                        <div ng-show="hasCoupon">
                            <div class="changePlanAction"><a class="changePlanLink" style="cursor: pointer; color: #00A080 !important; margin-top: 5px;"
                                ng-click="showCoupon()"><b>{{textCoupon}}</b></a>
                            </div>
                        </div>
                    </div>
                    <div class="changePlanContainer" ng-class="{ 'coupon': addCoupon }" ng-show="addCoupon && !hasCoupon">
                        <div class="couponInput">
                            <input type="text" class="form-control" ng-model="coupon">
                            <div ng-show="invalidCoupon" class="inputError">{{invalidCouponText}}</div>
                        </div>
                        <div class="couponButton"><b><a class="changePlanLink btn btn-danger" style="cursor: pointer;"
                                ng-click="validateCoupon()">Validar cupón</a></b></div>
                    </div>
                    <div class="signupTerms" id="touIntlWarning">Los pagos se procesarán internacionalmente. Es
                        posible que se apliquen comisiones bancarias adicionales.</div>
                    <ul class="simpleForm structural ui-grid">
                        <li class="nfFormSpace">
                            <div class="signupTerms" id="tou-us-no_trial"><span>
                                    <p>Al hacer clic en el botón "Iniciar membresía", aceptas nuestros <a
                                            target="blank" href="{{linkRedirectTermsConditions}}">Términos
                                            de uso</a> <div ng-show="!isDoctorOnline">Puedes
                                        cancelar tu membresía en cualquier momento. Para hacerlo, visita tu Cuenta y
                                        haz clic en "Cancelar membresía".</div></p>
                                    
                                        <div ng-show="isDoctorOnline">
                                            {{ 'ALERTS_TITLES_PAYMENT_MESSAGE' | translate }}
                                        </div>
                                </span></div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="submitBtnContainer">
                <button id="simplicityPayment" type="submit" autocomplete="off"
                    class="btn btn-action" ng-disabled="suscribeForm.$invalid || !validCreditCard" ng-click="suscribe()">
                    <i class="fa fa-circle-o-notch fa-pulse fa-2x fa-fw buttonIcon" aria-hidden="true"></i>
                    <span class="buttonText">INICIAR MEMBRESÍA</span>
                </button>
            </div>
        </form>
        <div class="cvvTooltip" ng-show='showInfo'><span class="icon-close close-button" ng-click='toogleInfo()' style="cursor: pointer;">
                <i class="fa fa-times fa-2x" aria-hidden="true"></i>
        </span>
            <div class="tooltipDesc">El código de seguridad de tu tarjeta (CVV) es el número de 3 o 4&nbsp;dígitos
                que se encuentra en el reverso de la mayoría de las tarjetas.</div>
            <div class="otherCvvHelp"></div>
            <div class="amexCvvHelp"></div>
        </div>
        <iframe id="powerTranz" frameborder="0" name="powerTranz" width="85%" height="85%" target="_blank" hidden></iframe>
    </div>
</div>
<script>
    (function ($) {
    $.fn.inputFilter = function (inputFilter) {
        return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function () {
            if (inputFilter(this.value)) {
                this.oldValue = this.value;
                this.oldSelectionStart = this.selectionStart;
                this.oldSelectionEnd = this.selectionEnd;
            } else if (this.hasOwnProperty("oldValue")) {
                this.value = this.oldValue;
                this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
            }
        });
    };
}(jQuery));
$("#id_creditCardSecurityCode").inputFilter(function (value) {
    return /^\d*$/.test(value);
});
$("#id_firstName").inputFilter(function (value) {
    return /^[ a-zA-ZáéíóúÁÉÍÓÚñÑ]*$/.test(value);
});
$("#id_lastName").inputFilter(function (value) {
    return /^[a-zA-Z]*$/.test(value);
});
$("#id_creditCardNumber").keydown(function() {
  
});
</script>